Загрузка треков по ftp
======================
## Описание
 Если пользователю доступен функционал в закачки треков по ftp он может под своим логином и паролем закачивать треки на ftp сервер которые потом попадут на модерацию треков.
 Доступ определяеться ролями пользователя.
 У каждого пользователя, при создании аккаунта создаеться домашняя папка на ftp сервере, при удаление аккаунта папку удаляеться.

 После того как трек закачан на ftp, скрипт загружает файл на модерацию и удаляет его из ftp и трек появляеться на сайте в треках пользователя.

## Используем
  vsftpd - ftp сервер
  pam_pgsql - аутентификация пользователя
  inotify - обработка закаченных файлов
  bluepill - для запуска скрипта

## Установка
 Устанваливаем  vsftpd - можно из пакетов или из исходников, проверялось на версии vsftpd: version 2.2.0
 конфигурием по конфигурационному файлу config/vsftpd/vsftpd.conf, файл конфигруации располагаеться /etc (ubuntu)

 Устанавливаем pam-pgsql, проверялось на версии 0.7-1.
 конфигурием по конфигурационным файлам:
   config/pam_pgsql_vsftpd.conf
   config/pam.d/vsftpd
   все файлы располагаются в /etc (ubuntu)

 inotify - в систему должна быть установлены либы inotify
 bluepill - устанавливаем gem, настраиваем config/bluepill/development.pill (прописываем свои пути)
 для bluepill не забыть создать pid файл, который прописан в config/bluepill/development.pill
 ln -s /usr/local/lib/security/pam_pgsql.so /lib/security/pam_pgsql.so


## Запуск
 Делаем миграциюв рельсах (добавляет поля доступа и пароля)
 Запускаем vsftpd с новой конфигурации.
 Запускаем inotify sudo bluepill load config/bluepill/development.pill





